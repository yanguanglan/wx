<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <link rel="stylesheet" type="text/css" href="/static/wxgjcn/css/festival/wei_dialog_v.css-2014-03-07-1.css"  media="all" />
<script type="text/javascript" src="/static/wxgjcn/src/festival/wei_webapp_v2_common_v.js-2014-03-07-1.js" ></script>
<script type="text/javascript" src="/static/wxgjcn/src/festival/MAudio_v.js-2014-03-07-1.js" ></script>
<title>圣诞老人送礼啦！</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
		<meta content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport">
        <meta name="Keywords" content="微信营销、微信代运营、微信定制开发、微信托管、微网站、微商城、微营销" />
        <meta name="Description" content="盛世源码—国内优秀的微信公众服务平台，国内最大的微信公众智能服务平台，盛世源码—国内优秀的微信公众服务平台八大微体系：微菜单、微官网、微会员、微活动、微商城、微推送、微服务、微统计，企业微营销必备。" />
        <!-- Mobile Devices Support @begin -->
            <meta content="application/xhtml+xml;charset=UTF-8" http-equiv="Content-Type">
            <meta content="no-cache,must-revalidate" http-equiv="Cache-Control">
            <meta content="no-cache" http-equiv="pragma">
            <meta content="0" http-equiv="expires">
            <meta content="telephone=no, address=no" name="format-detection">
            <meta name="apple-mobile-web-app-capable" content="yes" /> <!-- apple devices fullscreen -->
            <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
        <!-- Mobile Devices Support @end -->
        <link rel="shortcut icon" href="httpimg/favicon.ico" />
    </head>
    <body onselectstart="return true;" ondragstart="return false;">
        <style>
    body,article,section,h1,h2,hgroup,p,a,ul,ol,li,em,div,small,span,footer,canvas,figure,figcaption,input{margin:0;padding:0;}
    body *{ -webkit-transform-style: preserve-3d; -webkit-backface-visibility:
    hidden; } img{border:none;} input:focus{outline:0 none; -webkit-user-modify:read-write-plaintext-only;-webkit-tap-highlight-color:rgba(0,0,0,0);}
    input[type=search]{-webkit-appearance:none;} *[hidden]{display:none !important;}
    a{text-decoration:none;cursor:pointer;} a.autotel{text-decoration:none;color:inherit;}
    ul{list-style-type:none;} small,small em{font-size:15px;} figure[hidden]{display:none;}
    .box:after{ clear: both; display: block; visibility: hidden; height: 0;
    content: "."; } .box{ *zoom: 1; } body{overflow:hidden;background:#9adaca;}
    section{position:relative;-webkit-transform-origin:0 0;} section>div{position:absolute;
    -webkit-transition:-webkit-transform 3s ease-in-out; } section, #bkLayer{width:1545px;height:1139px;}
    #bkLayer{top:0;left:0; background:#9adaca url('/img/festival/bk.png')/*tpa=httpimg/festival/bk.png*/ repeat-x 0
    0; -webkit-background-size:1545px 1139px; } #farLayer{ width:599px;height:378px;
    right:22px;bottom:70px; background:url('/img/festival/far.png')/*tpa=httpimg/festival/far.png*/ no-repeat 0 0; -webkit-background-size:599px
    378px; } #middleLayer{ width:420px;height:265px; left:600px;bottom:95px;
    background:url('/img/festival/far.png')/*tpa=httpimg/festival/far.png*/ no-repeat 0 0; -webkit-background-size:410px
    265px; } #nearLayer{ width:1700px;height:330px; left:0;bottom:0; background:
    url('/img/festival/near.png')/*tpa=httpimg/festival/near.png*/ no-repeat 110px 0, url('/img/festival/land.png')/*tpa=httpimg/festival/land.png*/ repeat-x left
    bottom; -webkit-background-size: 375px 232px, 1545px 230px; } #copyrightLayer{width:183px;height:63px;top:1040px;right:0;display:none;
    -webkit-background-size:183px 63px; } #sleighLayer{ top:220px;left:40px;
    } #sleighLayer, #sleighLayer>div, #sleighLayer>div>b, #sleighLayer>div>b::before,
    #sleighLayer>div>b::after{width:1491px;height:680px;} #sleighLayer>div>b,
    #sleighLayer>div>p, #sleighLayer>div>img, #sleighLayer>div>article, #sleighLayer>div>em,
    #sleighLayer>div>a{position:absolute;} #sleighLayer>div{position:relative;}
    #sleighLayer>div>b{top:0;left:0;z-index:2;} #sleighLayer>div>b::before,
    #sleighLayer>div>b::after{content:'';display:inline-block;position:absolute;top:0;left:0;}
    #sleighLayer>div>b:before{z-index:1; background:url('/img/festival/sleigh1.png')/*tpa=httpimg/festival/sleigh1.png*/
    no-repeat 0 0; -webkit-background-size:1336px 650px; } #sleighLayer>div>b:after{z-index:3;top:188px;left:272px;
    background:url('/img/festival/sleigh2.png')/*tpa=httpimg/festival/sleigh2.png*/ no-repeat 0 0; -webkit-background-size:1218px
    493px; } #sleighLayer>div>b>i{ display:inline-block;position:absolute;top:70px;left:746px;z-index:2;
    width:434px;height:483px; -webkit-filter:drop-shadow(0 -5px 20px rgba(175,
    249, 231, 1)); background:url('/img/festival/box.png')/*tpa=httpimg/festival/box.png*/ no-repeat 0 0; -webkit-background-size:434px
    483px; -webkit-transform-origin: 50% 70%; } #sleighLayer.view2>div>b>i{
    -webkit-animation: box_anim 1.5s ease-in; -webkit-animation-iteration-count:
    infinite; } @-webkit-keyframes box_anim{ 0%{ -webkit-transform: rotate(-5deg);
    } 10%{ -webkit-transform: rotate(0deg); } 20%{ -webkit-transform: rotate(-5deg);
    } 30%{ -webkit-transform: rotate(0deg); } 40%{ -webkit-transform: rotate(-5deg);
    } 50%{ -webkit-transform: rotate(0deg); } 60%{ -webkit-transform: rotate(-5deg);
    } 100%{ -webkit-transform: rotate(-5deg); } } #sleighLayer>div>p{ -webkit-transition:-webkit-transform
    .2s ease-in; -webkit-transform:rotate(0); } #sleighLayer>div>p:nth-of-type(1){
    width:134px;height:102px;top:420px;left:85px;z-index:1; background:url('/img/festival/leg1.png')/*tpa=httpimg/festival/leg1.png*/
    no-repeat 0 0; -webkit-transform-origin:105px 8px; } #sleighLayer>div>p:nth-of-type(1).move{
    -webkit-transform:rotate(15deg); } #sleighLayer>div>p:nth-of-type(2){ width:93px;height:143px;top:430px;left:140px;z-index:3;
    background:url('/img/festival/leg2.png')/*tpa=httpimg/festival/leg2.png*/ no-repeat 0 0; -webkit-transform-origin:79px
    10px; } #sleighLayer>div>p:nth-of-type(2).move{ -webkit-transform:rotate(-15deg);
    } #sleighLayer>div>p:nth-of-type(3){ width:86px;height:179px;top:440px;left:270px;z-index:1;
    background:url('/img/festival/leg3.png')/*tpa=httpimg/festival/leg3.png*/ no-repeat 0 0; -webkit-transform-origin:42px
    11px; } #sleighLayer>div>p:nth-of-type(3).move{ -webkit-transform:rotate(15deg);
    } #sleighLayer>div>p:nth-of-type(4){ width:124px;height:134px;top:445px;left:300px;z-index:3;
    background:url('/img/festival/leg4.png')/*tpa=httpimg/festival/leg4.png*/ no-repeat 0 0; -webkit-transform-origin:18px
    19px; } #sleighLayer>div>p:nth-of-type(4).move{ -webkit-transform:rotate(-15deg);
    } #sleighLayer>div>img, #sleighLayer>div>article, #sleighLayer>div>em{
    opacity:0; -webkit-transition:opacity .5s ease-in-out 3s; } #sleighLayer.view2>div>img,
    #sleighLayer.view2>div>article, #sleighLayer.view2>div em{opacity:1;} #sleighLayer>div>img{z-index:4;
    width:113px;height:113px;top:-190px;left:710px; /*-webkit-transform:rotate(2.1deg);width:170px;height:170px;top:-181px;left:647px;*/
    } #sleighLayer>div>article{top:-200px;left:700px; width:754px;height:226px;text-indent:225px;
    background:url('/img/festival/flag.png')/*tpa=httpimg/festival/flag.png*/ no-repeat 0 0; } /*#sleighLayer>div>article
    h1, #sleighLayer>div>article h2{color:#D94634;font-weight:normal;text-shadow:1px
    1px #ccc;white-space:nowrap; font-size:30px;line-height:50px; -webkit-transform:
    rotate(3deg)}*/ #sleighLayer>div>article h2>i{font-size:26px;padding:0
    5px;font-style:normal;} #sleighLayer>div>article h1{/*padding-top:56px;*/
    font-weight:normal;text-shadow:1px 1px #ccc;white-space:nowrap; font-size:30px;line-height:50px;margin:128px
    0 0 -135px;padding:0;text-indent:30px; width:400px;text-align:center; }
    #sleighLayer>div>em{display:inline-block; /*width:35px;height:35px;top:-203px;left:722px;z-index:5;
    background:url('{$cdnServer}/misc/images/st_201311_xmas/pin.png') no-repeat
    0 0;*/ } #sleighLayer>div>a{ display:inline-block; width:370px;height:280px;
    top:77px;left:795px; z-index:6; } #noticeLayer{width:454px;height:60px;
    top:1060px;left:150px; background:url('/img/festival/notice.png')/*tpa=httpimg/festival/notice.png*/ no-repeat 0 0;
    -webkit-transition:opacity .7s ease-in-out; } #noticeLayer.flash{ opacity:
    .3; } #noticeLayer.view2{/*opacity:0;*/ display:none; } #toggleSnd{position:absolute;bottom:0;right:0;z-index:9;
    display:inline-block;color:#ccc;text-decoration:underline; font-size:25px;line-height:30px;min-width:100px;text-align:right;padding-right:10px;
    } #fallback{position:relative;width:650px;height:480px;overflow:hidden;
    background:url('/img/festival/sleigh_fallback.jpg')/*tpa=httpimg/festival/sleigh_fallback.jpg*/ no-repeat 0 0; -webkit-transition:-webkit-transform
    3s ease-in-out; -webkit-transform-origin:0 0; -webkit-transform:translateX(0);
    } #fallback.move{-webkit-transform:translateX(-280px);} #fallback>img,
    #fallback>article, #fallback>a{position:absolute;} #fallback>img{top:14px;left:285px;width:76px;height:76px;z-index:4;}
    #fallback>article{top:40px;left:150px; width:754px;height:226px;text-indent:225px;
    } #fallback>article h1, #fallback>article h2{color:#D94634;font-weight:normal;text-shadow:1px
    1px #ccc;white-space:nowrap; font-size:14px;line-height:18px;} #fallback>article
    h2>i{font-size:16px;padding:0 2px;font-style:normal;} #fallback>a{display:inline-block;width:160px;height:120px;top:125px;left:345px;z-index:6;}
    #fallback>#copyrightLayer{top:auto;bottom:0;right:0;position:absolute;
    width:92px;height:32px; -webkit-background-size:91.5px 31.5px; }
    body{overflow:hidden;width:100%;}
</style>
<section style="opacity: 1; -webkit-transform: scale(0.5838454784899034);">
    <div id="bkLayer" class="">
    </div>
    <div id="farLayer" class="">
    </div>
    <div id="middleLayer" class="">
    </div>
    <div id="nearLayer" class="">
    </div>
    <div id="copyrightLayer" class="">
    </div>
    <div id="sleighLayer" class="">
        <div>
            <b>
                <i>
                </i>
            </b>
            <p>
            </p>
            <p>
            </p>
            <p>
            </p>
            <p>
            </p>
            <!--跳转地址-->
            <a   id="jumpLink"></a>
            <!--祝福文字-->
        </div>
    </div>
    <div id="noticeLayer" class="flash">
    </div>
</section>
<a href="javascript:void(0)" id="toggleSnd" rel="httpimg/festival/snd.mp3" hidden="">
</a>
<div id="fallback" hidden="">
</div>
<script>
    // var srcWxuin = "337576875";
    // var linkKey = "1387779336476";
    // var wxuin = "1149331860";
    // var cqrcode = "q13872553994823";
    // var haveCoupon = "1";


    var cdnServer = "";

    //用于提前加载和判定速度的素材列表
    var assets = [
        cdnServer + 'httpimg/festival/bk.png', 
        //cdnServer + 'httpimg/festival/leigh1.png',
        cdnServer + 'httpimg/festival/sleigh2.png',
        cdnServer + 'httpimg/festival/box.png',
        cdnServer + 'httpimg/festival/leg1.png',
        cdnServer + 'httpimg/festival/leg2.png',
        cdnServer + 'httpimg/festival/leg3.png',
        cdnServer + 'httpimg/festival/leg4.png',
        cdnServer + 'httpimg/festival/flag.png',
        //cdnServer+'httpimg/festival/pin.png',
        cdnServer + 'httpimg/festival/notice.png' //,
        //cdnServer+'httpimg/festival/copy1.png'
    ];
    //可容忍的最大加载时间(ms), 超过这个时间将不加载音乐文件
    var maxLoadTime = 15 * 1000;

    var disableAutoJump = function() {
        window.clearTimeout(window._autojumpTo);
        window._autojumpTo = null;
        console.log('disable AutoJump');
    },
    enableAutoJump = function() {
        window._autojumpTo = setTimeout(function() {
            location.href = _q('#jumpLink').getAttribute('href');
        },
        20000);
        console.log('enable AutoJump');
    };

    _onPageLoaded(function() {
        if (_env.android && _env.version < 2.4
        /* && /HTC/.test(_ua)*/
        ) { //fallback for android 2.3.3
            var fb = _q('#fallback');
            fb.appendChild(_q('#sleighLayer>div>img'));
            fb.appendChild(_q('#sleighLayer>div>a'));
            fb.appendChild(_q('#sleighLayer>div>article'));
            fb.appendChild(_q('#copyrightLayer'));
            document.body.removeChild(_q('section'));
            document.body.removeChild(_q('#toggleSnd'));
            _show(fb);
            setTimeout(function() {
                _addClass(fb, 'move');

                var cp = _q('#copyrightLayer');
                var pw = window.innerWidth;
                var ph = window.innerHeight;
                var dw = 650 - 280 - pw;
                if (ph < 480) cp.style.bottom = parseInt(480 - ph + 10) + 'px';
                cp.style.right = parseInt(.5 * (650 - 280 - 92) + .5 * dw) + 'px';
                enableAutoJump();
            },
            5000);

        } else { //for 'normal' devices
            setTimeout(function() { //fix android 2.3.5
                var pageScale = 1;
                var root = _q('section');
                var bkLayer = _q('#bkLayer');
                var farLayer = _q('#farLayer');
                var middleLayer = _q('#middleLayer');
                var nearLayer = _q('#nearLayer');
                var notice = _q('#noticeLayer');
                var tglSnd = _q('#toggleSnd');
                var jumpLk = _q('#jumpLink');
                var bk_w = bkLayer.clientWidth;
                var bk_h = bkLayer.clientHeight;
                var pw = window.innerWidth;
                var ph = window.innerHeight;

                MLoading.show('加载中...');
                var loadFlag = assets.length,
                loadTimeStart = (new Date()).getTime(),
                loadTimeTotal = 0,
                checkAssets = function(e) {
                    if (!--loadFlag) init();
                },
                init = function() {
                    loadTimeTotal = (new Date()).getTime() - loadTimeStart;
                    console.log('素材加载时间: ', loadTimeTotal);
                    root.style.opacity = 1;
                    MLoading.hide();
                };
                root.style.opacity = .001;
                _forEach(assets,
                function(path, idx) {
                    var img = new Image;
                    img.id = 'preloadImg' + idx;
                    img.addEventListener('load', checkAssets);
                    img.src = path;
                });

                var sizePage = function(e) {
                    if (ph < bk_h) {
                        pageScale = ph / bk_h;
                    }
                    root.style[_vendor + 'Transform'] = 'scale(' + pageScale + ')';
                    root.parentNode.style.width = pw + 'px';
                    root.parentNode.style.height = ph + 'px';
                }
                sizePage();
                window.addEventListener('orientationchange', sizePage);

               
                var onWClick = function(e) {
                    if (sleighLayer.className.indexOf('view2') > -1) {
                        return;
                    }
                    gotoView2(e);
                };
                window.addEventListener(_touchSupport ? 'touchend': 'click', onWClick);

                var viewsXConfig = { //组件分别在两屏的x位置
                    bk: [bkLayer.getBoundingClientRect().left, (pw - bkLayer.clientWidth * pageScale) / pageScale],
                    far: [farLayer.getBoundingClientRect().left, (pw - farLayer.clientWidth * pageScale - parseInt(_getRealStyle(farLayer, 'right')) * pageScale - farLayer.getBoundingClientRect().left) / pageScale],
                    middle: [middleLayer.getBoundingClientRect().left, ( - pw - middleLayer.clientWidth) / pageScale],
                    near: [nearLayer.getBoundingClientRect().left, (pw - nearLayer.clientWidth * pageScale) / pageScale],
                    sleigh: [sleighLayer.getBoundingClientRect().left, (.5 * pw - 690
                    /*有效区域left*/
                    * pageScale - 610
                    /*有效区域width*/
                    * .5 * pageScale - sleighLayer.getBoundingClientRect().left) / pageScale]
                };
                viewsXConfig.copyright = [0, viewsXConfig.bk[1] - .5 * pw / pageScale + .5 * copyrightLayer.clientWidth];
                var stageMoving = false,
                legsInited = false,
                musicInited = false,
                gotoView1 = function() {
                    if (stageMoving) return;
                    disableAutoJump();
                    _forEach('section>div',
                    function(div) {
                        _removeClass(div, 'view2');
                    });
                    if (pw < bkLayer.clientWidth * pageScale) {
                        moveLayer(bkLayer, viewsXConfig.bk[0], 2500, 0);
                        moveLayer(farLayer, viewsXConfig.far[0], 1500, 0);
                        moveLayer(middleLayer, viewsXConfig.middle[0], 3200, 0);
                        moveLayer(nearLayer, viewsXConfig.near[0], 2000, 0);
                        moveLayer(copyrightLayer, viewsXConfig.copyright[0], 2000, 0);
                        moveLayer(sleighLayer, viewsXConfig.sleigh[0], 3000, 0);
                        stageMoving = true;
                        setTimeout(function() {
                            stageMoving = false;
                        },
                        4000);
                    }

                    noticeLayer.addEventListener("webkitTransitionEnd", flashNotice);
                    _addClass(noticeLayer, 'flash');

                    console.log('goto view1...');
                },
                gotoView2 = function(e) {
                    if (typeof e === 'undefined' && stageMoving) return;
                    disableAutoJump();
                    legsRun();
                    _forEach('section>div',
                    function(div) {
                        _addClass(div, 'view2');
                    });
                    if (pw < bkLayer.clientWidth * pageScale) {
                        sleighLayer.addEventListener("webkitTransitionEnd", updownSleigh);
                        moveLayer(bkLayer, viewsXConfig.bk[1], 3500, 2200);
                        moveLayer(farLayer, viewsXConfig.far[1], 2500, 3000);
                        moveLayer(middleLayer, viewsXConfig.middle[1], 4000, 2500);
                        moveLayer(nearLayer, viewsXConfig.near[1], 3000, 2000);
                        moveLayer(copyrightLayer, viewsXConfig.copyright[1], 3000, 2000);
                        moveLayer(sleighLayer, viewsXConfig.sleigh[1], 4000, 900);
                        stageMoving = true;
                        setTimeout(function() {
                            stageMoving = false;
                        },
                        6000);
                    }

                    noticeLayer.removeEventListener("webkitTransitionEnd", flashNotice);

                    if (loadTimeTotal < maxLoadTime) {
                        playMusic();
                    }
                    console.log('goto view2...');
                },
                flashNotice = function(e) {
                    if (noticeLayer.className.indexOf('flash') > -1) {
                        _removeClass(noticeLayer, 'flash');
                    } else {
                        _addClass(noticeLayer, 'flash');
                    }
                },
                updownSleigh = function(e) {
                    sleighLayer.style[_vendor + 'TransitionDuration'] = '2500ms';
                    sleighLayer.style[_vendor + 'TransitionDelay'] = '200ms';
                    var isView2 = sleighLayer.className.indexOf('view2') > -1;
                    var x1 = isView2 ? viewsXConfig.sleigh[1] : viewsXConfig.sleigh[0];
                    if (sleighLayer.className.indexOf('updown') > -1) {
                        _removeClass(sleighLayer, 'updown');
                        sleighLayer.style[_vendor + 'Transform'] = 'translateX(' + x1 + 'px) translateY(0)';
                    } else {
                        _addClass(sleighLayer, 'updown');
                        sleighLayer.style[_vendor + 'Transform'] = 'translateX(' + x1 + 'px) translateY(80px)';
                    }

                    if (isView2 && window._autojumpTo === null) {
                        enableAutoJump();
                    }
                },
                legsRun = function() {
                    if (legsInited) return;
                    legsInited = true;
                    var _loop = function(e) {
                        var leg = e.currentTarget;
                        /*if (sleighLayer.className.indexOf('updown')>-1){
      leg.removeEventListener("webkitTransitionEnd", arguments.callee, false);
      e.stopPropagation();
      return;
    }*/
                        if (leg.className == 'move') _removeClass(leg, 'move');
                        else _addClass(leg, 'move');
                        e.stopPropagation();
                    };
                    _forEach('#sleighLayer>div>p',
                    function(leg) {
                        leg.addEventListener("webkitTransitionEnd", _loop, false);
                        _addClass(leg, 'move');
                    });
                },
                moveLayer = function(dom, x, speed, delay) {
                    dom.style[_vendor + 'Transform'] = _trnOpen + parseInt(x) + 'px,0' + _trnClose;
                    dom.style[_vendor + 'TransitionDuration'] = speed + 'ms';
                    dom.style[_vendor + 'TransitionDelay'] = delay + 'ms';
                },
                playMusic = function() {
                    if (musicInited) return;
                    musicInited = true;
                    var snd = null;
                    var tglText = function() {
                        tglSnd.innerHTML = snd.playing ? '关闭音乐': '开启音乐';
                    };
                    var clickTglSnd = function(e) {
                        e.stopPropagation();
                        if (snd.playing) {
                            snd.pause();
                        } else {
                            snd.resume();
                        }
                        tglText();
                    };
                    snd = new MAudio([tglSnd.getAttribute('rel')], true);
                    snd.registCallback('canplay',
                    function() {
                        console.log('music canplay');
                        tglSnd.addEventListener('touchend', clickTglSnd);
                        tglText(null);
                        _show(tglSnd);
                    });
                    snd.registCallback('ended',
                    function() {
                        console.log('music loop');
                        snd.replay();
                    });
                };
                gotoView1();

            },
            20);

        } //end of else
    });
</script>
<script type="text/javascript">
            document.addEventListener('WeixinJSBridgeReady', function onBridgeReady() {
        window.shareData = {  
            "imgUrl": "/img/festival/milu_s.png"/*tpa=httpimg/festival/milu_s.png*/, 
            "timeLineLink": "http://www.weimob.com/Webfestival/index?pid=1071&bid=5&wechatid=fromusername",
            "sendFriendLink": "http://www.weimob.com/Webfestival/index?pid=1071&bid=5&wechatid=fromusername",
            "weiboLink": "http://www.weimob.com/Webfestival/index?pid=1071&bid=5&wechatid=fromusername",
            "tTitle": "圣诞老人派来送礼的圣诞小鹿，领它回家！",
            "tContent": "圣诞老人派来送礼的圣诞小鹿，领它回家！~",
            "fTitle": "圣诞快乐！",
            "fContent": "圣诞老人派来送礼的圣诞小鹿，领它回家！~",
            "wContent": "圣诞老人派来送礼的圣诞小鹿，领它回家！~" 
        };
        // 发送给好友
        WeixinJSBridge.on('menu:share:appmessage', function (argv) {
            WeixinJSBridge.invoke('sendAppMessage', { 
                "img_url": window.shareData.imgUrl,
                "img_width": "640",
                "img_height": "640",
                "link": window.shareData.sendFriendLink,
                "desc": window.shareData.fContent,
                "title": window.shareData.fTitle
            }, function (res) {
                _report('send_msg', res.err_msg);
            })
        });

        // 分享到朋友圈
        WeixinJSBridge.on('menu:share:timeline', function (argv) {
            WeixinJSBridge.invoke('shareTimeline', {
                "img_url": window.shareData.imgUrl,
                "img_width": "640",
                "img_height": "640",
                "link": window.shareData.timeLineLink,
                "desc": window.shareData.tContent,
                "title": window.shareData.tTitle
            }, function (res) {
                _report('timeline', res.err_msg);
            });
        });

        // 分享到微博
        WeixinJSBridge.on('menu:share:weibo', function (argv) {
            WeixinJSBridge.invoke('shareWeibo', {
                "content": window.shareData.wContent,
                "url": window.shareData.weiboLink,
            }, function (res) {
                _report('weibo', res.err_msg);
            });
        });
        }, false)
    </script>        		<div mark="stat_code" style="width:0px; height:0px; display:none;">
					</div>
	</body>
		<script type="text/javascript">
(function() {
	var wtj = document.createElement('script'); wtj.type = 'text/javascript'; wtj.async = true;
	wtj.src = 'http://tj.weimob.com/wtj.js?url=' + encodeURIComponent(location.href);
	var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(wtj, s);
})();
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3Fd80741dd59de91e1846b2add2c0ad2a2' type='text/javascript'%3E%3C/script%3E"));
function weimobAfterShare(shareFromWechatId,sendFriendLink,shareToPlatform){
	var wmShare = document.createElement('script'); wmShare.type = 'text/javascript'; wmShare.async = true;
    wmShare.src = 'http://' + getShareApiRouter() + '/api-share.js?fromWechatId=' + shareFromWechatId + '&shareToPlatform=';
	wmShare.src += shareToPlatform + '&pid=1071&sendFriendLink=' + encodeURIComponent(sendFriendLink);
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(wmShare, s);
}
function getShareApiRouter(){
	var str_domain = location.href.split('/',4)[2];
	var tj_domain = '127.0.0.1';
	switch(str_domain){
		case 'http://www.weimob.com/Webfestival/www.weimob.com':
			tj_domain = 'http://www.weimob.com/Webfestival/tj.weimob.com';
			break;
		case 'http://www.weimob.com/Webfestival/112.124.28.82':
			tj_domain = '112.124.28.82:400';
			break;
	}
	return tj_domain;
}
if(typeof(window.shareData) == 'undefined'){
	window.shareData = {
				"imgUrl": "", 
		"timeLineLink": "index-wechatid=fromUsername&pid=1071&bid=5.htm"/*tpa=http://www.weimob.com/Webfestival/index?wechatid=fromUsername&pid=1071&bid=5*/,
		"sendFriendLink": "index-wechatid=fromUsername&pid=1071&bid=5.htm"/*tpa=http://www.weimob.com/Webfestival/index?wechatid=fromUsername&pid=1071&bid=5*/,
		"weiboLink": "index-wechatid=fromUsername&pid=1071&bid=5.htm"/*tpa=http://www.weimob.com/Webfestival/index?wechatid=fromUsername&pid=1071&bid=5*/,
		"tTitle": document.title,
		"tContent": document.title,
		"fTitle": document.title,
		"fContent": document.title,
		"wContent": document.title
	}
}
document.addEventListener('WeixinJSBridgeReady', function onBridgeReady() {	 
	// 发送给好友
	WeixinJSBridge.on('menu:share:appmessage', function (argv) {
		WeixinJSBridge.invoke('sendAppMessage', { 
			"img_url": window.shareData.imgUrl,
			"img_width": "640",
			"img_height": "640",
			"link": window.shareData.sendFriendLink,
			"desc": window.shareData.fContent,
			"title": window.shareData.fTitle
		}, function (res) {
			weimobAfterShare("",window.shareData.sendFriendLink,'appmessage');
			_report('send_msg', res.err_msg);
		})
	});

	// 分享到朋友圈
	WeixinJSBridge.on('menu:share:timeline', function (argv) {
		WeixinJSBridge.invoke('shareTimeline', {
			"img_url": window.shareData.imgUrl,
			"img_width": "640",
			"img_height": "640",
			"link": window.shareData.timeLineLink,
			"desc": window.shareData.tContent,
			"title": window.shareData.tTitle
		}, function (res) {
							//alert("android-share-test-000001",10000);
						//weimobAfterShare("",window.shareData.timeLineLink,'timeline');
			_report('timeline', res.err_msg);
		});
	});

	// 分享到微博
	WeixinJSBridge.on('menu:share:weibo', function (argv) {
		WeixinJSBridge.invoke('shareWeibo', {
			"content": window.shareData.wContent,
			"url": window.shareData.weiboLink
		}, function (res) {
			weimobAfterShare("",window.shareData.weiboLink,'weibo');
			_report('weibo', res.err_msg);
		});
	});
}, false);
</script>
<script type="text/javascript" src="/static/wxgjcn//kf.weimob.com/js/ChatFloat.js" ></script>
<script type="text/javascript">
var str_domain = location.href.split('/',4)[2];
var boolIsTest = true;
if(str_domain == 'http://www.weimob.com/Webfestival/www.weimob.com'){
	boolIsTest = false;
}
new ChatFloat({
        AId: '1071',
        openid: "",
		top:150,
		right:0,
		IsTest:boolIsTest
});
</script>
</html>

